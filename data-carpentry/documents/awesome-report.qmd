---
title: "My Awesome Report"
author: "That's me"
format: 
  html: default
  docx: default
  pdf: default
---

```{r}
#| label: setup
#| include: false

library(tidyverse)
library(here)
interviews <- read_csv(here("data/SAFI_clean.csv"), na = "NULL")
interviews_plotting <- read_csv(here("data_output/interviews_plotting.csv"))

percent_wall_type <- interviews_plotting %>%
  filter(respondent_wall_type != "cement") %>%
  count(village, respondent_wall_type) %>%
  group_by(village) %>%
  mutate(percent = (n / sum(n)) * 100)
```


# Title
## Section
### Sub-section
#### Sub-sub-section

Just write text.

## Introduction

This report was rendered on `r Sys.Date()`.

This report uses the **tidyverse** package along with the *SAFI*
dataset which has columns that include:

- village
  + Name of village
- interview_date
  + Date of interview
    * another detail
- no_members
- years_liv
- respondent_wall_type

These are my favourite:

1. village
2. rooms
3. meals thing
4. some other column

## Results

Here is a table @tbl-cool-table

```{r}
#| label: tbl-cool-table
#| tbl-cap: "Caption"
#| echo: false
#| message: false
interviews %>%
  filter(!is.na(memb_assoc)) %>%
  group_by(village, memb_assoc) %>%
  summarise(mean_no_membrs = mean(no_membrs)) %>%
  knitr::kable(col.names = c("Village", "Member Association", "Mean number of Members"))
```

And a plot [@fig-cool-plot]

```{r}
#| echo: false
#| label: fig-cool-plot
percent_wall_type %>%
  ggplot(aes(x = respondent_wall_type, y = percent, fill = respondent_wall_type)) +
  geom_col(position = "dodge") +
  facet_wrap(~ village) +
  labs(
    title = "Proportion of wall type by village",
    x = "Wall type",
    y = "Percent",
    fill = "Wall type") +
  theme_bw() +
  theme(
    axis.text.x = element_blank(),
    #axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1),
    #legend.position = "none",
    axis.ticks.x = element_blank(),
    axis.title.x = element_blank()
  )
```






